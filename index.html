<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>T-Shirt Designer Pro — Ultra Edition (3D)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- styles -->
  <link rel="stylesheet" href="style.css">

  <!-- libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/examples/js/controls/OrbitControls.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/examples/js/loaders/GLTFLoader.js"></script>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>

<!-- Loading Screen -->
<div id="loadingScreen" class="loading-screen">
  <div class="loading-spinner"></div>
  <h2>T-Shirt Designer Pro</h2>
  <p id="loadingMsg">Loading Ultra Experience...</p>
</div>

<!-- Main App -->
<div id="mainApp" class="main-app" style="display:none;">

  <!-- Top nav -->
  <nav class="top-nav">
    <div class="nav-brand"><i class="fas fa-tshirt"></i><span> T-Shirt Designer Pro</span></div>
    <div class="nav-center">
      <div class="progress-indicator">
        <div class="step active" data-step="1">Design</div>
        <div class="step" data-step="2">Preview</div>
        <div class="step" data-step="3">Order</div>
      </div>
    </div>
    <div class="nav-actions">
      <button id="saveDesignBtn" class="nav-btn"><i class="fas fa-save"></i> Save</button>
      <button id="loadDesignBtn" class="nav-btn"><i class="fas fa-folder-open"></i> Load</button>
      <button id="helpBtn" class="nav-btn"><i class="fas fa-question-circle"></i> Help</button>
    </div>
  </nav>

  <!-- Content grid -->
  <div class="main-content">

    <!-- Left -->
    <div class="left-sidebar">
      <div class="panel tools-panel">
        <h3><i class="fas fa-palette"></i> Design Tools</h3>

        <div class="tool-section">
          <h4>Garment Type</h4>
          <div id="garmentGrid" class="garment-grid"></div>
          <div style="margin-top:8px;display:flex;gap:8px;">
            <input id="newWareInput" placeholder="New ware (admin only)" class="input-inline" />
            <button id="addWareBtn" class="btn-secondary">Add</button>
          </div>
        </div>

        <div class="tool-section">
          <h4>Size</h4>
          <div class="size-selector">
            <button class="size-btn" data-size="XS">XS</button>
            <button class="size-btn" data-size="S">S</button>
            <button class="size-btn active" data-size="M">M</button>
            <button class="size-btn" data-size="L">L</button>
            <button class="size-btn" data-size="XL">XL</button>
            <button class="size-btn" data-size="XXL">XXL</button>
          </div>
        </div>

        <div class="tool-section">
          <h4>Base Color</h4>
          <div id="colorPalette" class="color-palette"></div>
          <button id="customColorBtn" class="custom-color-btn"><i class="fas fa-eyedropper"></i> Custom Color</button>
        </div>

        <div class="tool-section">
          <h4>Add Elements</h4>
          <div class="element-buttons">
            <button class="element-btn" data-type="text"><i class="fas fa-font"></i> Text</button>
            <button class="element-btn" data-type="upload"><i class="fas fa-upload"></i> Upload</button>
            <button class="element-btn" data-type="shapes"><i class="fas fa-shapes"></i> Shapes</button>
            <button class="element-btn" data-type="qr"><i class="fas fa-qrcode"></i> QR</button>
          </div>
        </div>

      </div>

      <div class="panel graphics-panel">
        <h3><i class="fas fa-sticker-mule"></i> Stickers</h3>
        <div class="library-controls">
          <div class="search-box"><i class="fas fa-search"></i><input id="graphicsSearch" placeholder="Search stickers..."></div>
          <div class="category-tabs">
            <button class="cat-tab active" data-category="all">All</button>
            <button class="cat-tab" data-category="logos">Logos</button>
            <button class="cat-tab" data-category="icons">Icons</button>
            <button class="cat-tab" data-category="patterns">Patterns</button>
            <button class="cat-tab" data-category="text">Text Art</button>
          </div>
        </div>
        <div id="graphicsGrid" class="graphics-grid"></div>
      </div>

      <div class="panel layers-panel">
        <h3><i class="fas fa-layer-group"></i> Layers</h3>
        <div id="layersList" class="layers-list"></div>
      </div>
    </div>

    <!-- Canvas area -->
    <div class="canvas-area">

      <div class="canvas-controls">
        <div class="view-controls">
          <button class="view-btn active" data-view="front"><i class="fas fa-eye"></i> Front</button>
          <button class="view-btn" data-view="back"><i class="fas fa-eye"></i> Back</button>
          <button class="view-btn" data-view="both"><i class="fas fa-columns"></i> Both</button>
        </div>

        <div class="zoom-controls">
          <button id="zoomOut"><i class="fas fa-search-minus"></i></button>
          <span id="zoomLevel">100%</span>
          <button id="zoomIn"><i class="fas fa-search-plus"></i></button>
          <button id="fitToScreen"><i class="fas fa-expand-arrows-alt"></i></button>
        </div>

        <div class="canvas-tools">
          <button id="undoBtn"><i class="fas fa-undo"></i></button>
          <button id="redoBtn"><i class="fas fa-redo"></i></button>
          <button id="deleteBtn"><i class="fas fa-trash"></i></button>
          <button id="duplicateBtn"><i class="fas fa-copy"></i></button>
        </div>
      </div>

      <div class="canvas-container">
        <div id="frontCanvasWrapper" class="canvas-wrapper">
          <canvas id="frontCanvas" width="500" height="700"></canvas>
          <div class="canvas-label">Front</div>
        </div>
        <div id="backCanvasWrapper" class="canvas-wrapper" style="display:none;">
          <canvas id="backCanvas" width="500" height="700"></canvas>
          <div class="canvas-label">Back</div>
        </div>
      </div>

      <!-- 3D Mockup Panel -->
      <div id="threePreview" class="panel three-panel">
        <div class="three-topbar">
          <div style="display:flex; gap:10px; align-items:center;">
            <label style="font-weight:700">3D Mockup</label>
            <input id="glbUpload" type="file" accept=".glb,.gltf" title="Upload a .glb to replace model">
            <button id="rotate3D" class="btn-secondary">Rotate</button>
            <button id="toggle3D" class="btn-secondary">Pause</button>
          </div>
        </div>
        <div id="threeMount" class="three-mount"></div>
        <div id="threeStatus" class="three-status">3D status: initializing…</div>
      </div>

    </div>

    <!-- Right -->
    <div class="right-sidebar">
      <div class="panel properties-panel">
        <h3><i class="fas fa-cog"></i> Properties</h3>
        <div id="propertiesContent"><p class="no-selection">Select an element to edit properties</p></div>
      </div>

      <div class="panel preview-panel">
        <h3><i class="fas fa-eye"></i> Live Preview</h3>
        <div id="livePreview" class="live-preview"></div>
      </div>

      <div class="panel order-panel">
        <h3><i class="fas fa-shopping-cart"></i> Order Summary</h3>
        <div class="price-breakdown">
          <div class="price-item"><span>Base Price:</span><span id="basePrice">LKR 2,500.00</span></div>
          <div class="price-item"><span>Graphics:</span><span id="graphicsPrice">LKR 0.00</span></div>
          <div class="price-item"><span>Text:</span><span id="textPrice">LKR 0.00</span></div>
          <div class="price-item"><span>Premium:</span><span id="premiumPrice">LKR 0.00</span></div>
          <div class="price-total"><span>Total:</span><span id="totalPrice" data-raw="2500">LKR 2,500.00</span></div>
        </div>

        <div class="quantity-selector">
          <label>Quantity:</label>
          <div class="qty-controls"><button id="qtyMinus">-</button><input type="number" id="quantity" value="1" min="1"><button id="qtyPlus">+</button></div>
        </div>

        <button id="addToCartBtn" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
        <button id="orderNowBtn" class="btn-primary"><i class="fas fa-credit-card"></i> Order Now</button>
      </div>
    </div>

  </div>
</div>

<!-- Text Editor modal (kept simple) -->
<div id="textEditorModal" class="modal"><div class="modal-content"><div class="modal-header"><h3>Text Editor</h3><button class="close-btn">&times;</button></div><div class="modal-body"><label>Text</label><textarea id="textContent"></textarea><div class="style-row"><label>Font</label><select id="fontFamily"><option>Arial</option><option>Impact</option><option>Courier New</option></select></div><div class="style-row"><label>Size</label><input id="fontSize" type="range" min="12" max="120" value="24"><span id="fontSizeValue">24px</span></div><div class="style-row"><label>Color</label><input id="textColor" type="color" value="#000000"></div></div><div class="modal-footer"><button id="cancelText" class="btn-secondary">Cancel</button><button id="applyText" class="btn-primary">Apply</button></div></div></div>

<!-- Order modal -->
<div id="orderModal" class="modal"><div class="modal-content large"><div class="modal-header"><h3>Complete Your Order</h3><button class="close-btn">&times;</button></div><div class="modal-body"><div id="modalOrderSummary"></div></div><div class="modal-footer"><button class="btn-secondary">Save Draft</button><button class="btn-primary">Place Order</button></div></div></div>

<!-- Admin -->
<div id="adminPanel" class="admin-panel" style="display:none;">
  <div class="admin-header"><h2><i class="fas fa-crown"></i> Admin</h2><button id="adminCloseBtn" class="close-btn">&times;</button></div>
  <div class="admin-tabs">
    <button class="admin-tab active" data-tab="orders">Orders</button>
    <button class="admin-tab" data-tab="graphics">Stickers</button>
    <button class="admin-tab" data-tab="settings">Settings</button>
    <button class="admin-tab" data-tab="analytics">Analytics</button>
  </div>
  <div class="admin-content">
    <div id="ordersTab" class="tab-content active"><div class="admin-toolbar"><input id="orderSearch" placeholder="Search..."></div><div id="ordersTable"><table><thead><tr><th>Order</th><th>Customer</th><th>Date</th><th>Total</th></tr></thead><tbody id="ordersTableBody"></tbody></table></div></div>
    <div id="graphicsTab" class="tab-content"><div class="admin-toolbar"><button id="uploadGraphics" class="btn-primary"><i class="fas fa-upload"></i> Upload Stickers</button><input id="graphicsUpload" type="file" accept="image/*,image/svg+xml" multiple style="display:none;"></div><div id="adminGraphicsGrid"></div></div>
    <div id="settingsTab" class="tab-content"><div class="settings-section"><label>Base Price (LKR)</label><input id="basePriceInput" type="number" value="2500"></div><button id="saveSettings" class="btn-primary">Save Settings</button></div>
    <div id="analyticsTab" class="tab-content">—</div>
  </div>
</div>

<button id="adminFloatingBtn" class="floating-admin-btn"><i class="fas fa-crown"></i></button>

<div id="notifications" class="notifications-container"></div>

<div id="helpModal" class="modal"><div class="modal-content"><div class="modal-header"><h3>Help</h3><button class="close-btn">&times;</button></div><div class="modal-body"><p>Choose garment, add stickers or text, preview 3D mockup, then order.</p></div></div></div>

<script src="script.js"></script>
</body>
</html>
